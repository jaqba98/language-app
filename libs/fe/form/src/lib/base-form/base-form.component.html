<form [formGroup]="formGroup" (ngSubmit)="onSubmit()">
  <lib-flex [flexDirection]="flexDirection" alignItems="stretch" gap="small">
    <ng-container *ngFor="let control of getControls()">
      <lib-flex [alignItems]="control.alignItems" gap="tiny">
        <lib-input
          *ngIf="control.kind === 'input'"
          [controlForm]="getControl(control.id)"
          [control]="control"></lib-input>
        <lib-button-link
          *ngIf="control.kind === 'buttonLink'"
          [controlForm]="getControl(control.id)"
          [control]="control"></lib-button-link>
        <lib-button-text
          *ngIf="control.kind === 'buttonText'"
          [controlForm]="getControl(control.id)"
          [control]="control"></lib-button-text>
        <lib-button-icon
          *ngIf="control.kind === 'buttonIcon'"
          [controlForm]="getControl(control.id)"
          [control]="control"></lib-button-icon>
        <lib-link
          *ngIf="control.kind === 'link'"
          [controlForm]="getControl(control.id)"
          [control]="control"></lib-link>
        <lib-error
          *ngIf="controlInvalid(control)"
          [value]="getControlError(control.id)"></lib-error>
      </lib-flex>
    </ng-container>
    <lib-error *ngIf="formInvalid()" [value]="formErrorMessage"></lib-error>
  </lib-flex>
</form>
